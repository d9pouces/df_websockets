{"version":3,"file":"df_websockets/static/js/df_websockets.min.js","mappings":"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","sources":["webpack://@d9pouces/df_websockets/./df_websockets/app.js","webpack://@d9pouces/df_websockets/./df_websockets/html.js","webpack://@d9pouces/df_websockets/./df_websockets/base.js","webpack://@d9pouces/df_websockets/./df_websockets/forms.ts","webpack://@d9pouces/df_websockets/webpack/bootstrap","webpack://@d9pouces/df_websockets/webpack/runtime/define property getters","webpack://@d9pouces/df_websockets/webpack/runtime/hasOwnProperty shorthand","webpack://@d9pouces/df_websockets/webpack/startup"],"sourcesContent":["////////////////////////////////////////////////////////////////////////////////\n// This file is part of df_websockets                                          /\n//                                                                             /\n// Copyright (C) 2020 Matthieu Gallet <github@19pouces.net>                    /\n// All Rights Reserved                                                         /\n//                                                                             /\n// You may use, distribute and modify this code under the                      /\n// terms of the (BSD-like) CeCILL-B license.                                   /\n//                                                                             /\n// You should have received a copy of the CeCILL-B license with                /\n// this file. If not, please visit:                                            /\n// https://cecill.info/licences/Licence_CeCILL-B_V1-en.txt (English)           /\n// or https://cecill.info/licences/Licence_CeCILL-B_V1-fr.txt (French)         /\n//                                                                             /\n////////////////////////////////////////////////////////////////////////////////\n(() => {\n\n    window.DFSignals = {\n        connection: null,\n        buffer: [],\n        registry: {},\n        wsurl: null\n    };\n\n    function getCookie(cname) {\n        const name = cname + \"=\";\n        const decodedCookie = decodeURIComponent(document.cookie);\n        const ca = decodedCookie.split(';');\n        for (let i = 0; i < ca.length; i++) {\n            let c = ca[i];\n            while (c.charAt(0) === ' ') {\n                c = c.substring(1);\n            }\n            if (c.indexOf(name) === 0) {\n                return c.substring(name.length, c.length);\n            }\n        }\n        return \"\";\n    }\n\n    function websocketConnect() {\n        const cookieName = \"dfwsurl\";\n        if (window.DFSignals.wsurl === null) {\n            const dfWsURL = getCookie(cookieName);\n            window.DFSignals.wsurl = decodeURIComponent(dfWsURL);\n        }\n        if (!window.DFSignals.wsurl) {\n            console.info(\"Unable to get the websocket URL in the '\" + cookieName + \"' cookie.\");\n            return;\n        }\n        const connection = new WebSocket(window.DFSignals.wsurl);\n        /* cannot use header or cookies (cookies may change after the initial connection)\n        *  so we use GET parameter\n        *  */\n        connection.onopen = () => {\n            window.DFSignals.connection = connection;\n            for (let i = 0; i < window.DFSignals.buffer.length; i++) {\n                connection.send(window.DFSignals.buffer[i]);\n            }\n            window.DFSignals.buffer = [];\n        };\n        connection.onmessage = (e) => {\n            console.debug('received call ' + e.data + ' from server.')\n            const msg = JSON.parse(e.data);\n            // noinspection JSUnresolvedVariable\n            if (msg.signal && msg.signal_id) {\n                window.DFSignals.call(msg.signal, msg.opts, msg.signal_id);\n            }\n        };\n        connection.onerror = (e) => {\n            console.error(\"WS error: \" + e);\n        };\n        connection.onclose = () => {\n            window.DFSignals.connection = null;\n            setTimeout(websocketConnect, 3000);\n        }\n        addEventListener(\"beforeunload\", () => {\n            connection.close();\n        });\n\n    }\n\n    function call(signal, opts, id) {\n        /*\"\"\"\n        .. function:: call(signal, opts, id)\n\n            Call a signal.\n            If the signal is also defined in the Python server and available to the user, then the Python signal is also triggered.\n\n            :param string signal: Name of the called signal.\n            :param object opts: Object with signal arguments.\n            :param string id: Unique id of each signal triggered by the server. Do not use it yourself.\n            :returns: always `false`.\n        */\n        // if (window.DFSignals.registry[signal] === undefined) {\n        //     console.debug('unknown call \"' + signal + '\" (from both client and server).');\n        //     return false;\n        // } else\n        if ((id !== undefined) && (window.DFSignals.registry[id] !== undefined)) {\n            return false;\n        } else if (id !== undefined) {\n            window.DFSignals.registry[id] = true;\n        }\n        if (window.DFSignals.registry[signal] !== undefined) {\n            console.debug('call \"' + signal + '\"', opts);\n            for (let i = 0; i < window.DFSignals.registry[signal].length; i += 1) {\n                window.DFSignals.registry[signal][i](opts, id);\n            }\n        }\n        if (id === undefined) {\n            console.debug('call from client: \"' + signal + '\"', opts);\n            const msg = JSON.stringify({signal: signal, opts: opts});\n            if (window.DFSignals.connection) {\n                window.DFSignals.connection.send(msg);\n            } else {\n                window.DFSignals.buffer.push(msg);\n            }\n        }\n\n        return false;\n    }\n\n    function connect(signal, fn) {\n        /*\"\"\"\n        .. function:: connect(signal, fn)\n\n            Connect a javascript code to the given signal name.\n\n            :param string signal: Name of the signal.\n            :param function fn: Function that takes a single object as argument. The properties of this object are the signal arguments.\n            :returns: nothing.\n        */\n        if (window.DFSignals.registry[signal] === undefined) {\n            window.DFSignals.registry[signal] = [];\n        }\n        window.DFSignals.registry[signal].push(fn);\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", websocketConnect);\n\n    window.DFSignals.call = call;\n    window.DFSignals.connect = connect;\n\n})();\n","////////////////////////////////////////////////////////////////////////////////\n// This file is part of df_websockets                                          /\n//                                                                             /\n// Copyright (C) 2020 Matthieu Gallet <github@19pouces.net>                    /\n// All Rights Reserved                                                         /\n//                                                                             /\n// You may use, distribute and modify this code under the                      /\n// terms of the (BSD-like) CeCILL-B license.                                   /\n//                                                                             /\n// You should have received a copy of the CeCILL-B license with                /\n// this file. If not, please visit:                                            /\n// https://cecill.info/licences/Licence_CeCILL-B_V1-en.txt (English)           /\n// or https://cecill.info/licences/Licence_CeCILL-B_V1-fr.txt (French)         /\n//                                                                             /\n////////////////////////////////////////////////////////////////////////////////\n\nexport const htmlAfter = opts => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        const originalNextSibling = elt.nextSibling;\n        elt.insertAdjacentHTML('afterend', opts.content);\n        let sibling = elt.nextSibling;\n        while (sibling && (sibling !== originalNextSibling)) {\n            if (sibling.querySelectorAll) {\n                sibling.dispatchEvent(new Event('DOMContentAdded', {bubbles: true}));\n            }\n            sibling = sibling.nextSibling;\n        }\n    });\n};\nexport const htmlAppend = opts => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        const originalLastChild = elt.lastChild;\n        elt.insertAdjacentHTML('beforeend', opts.content);\n        let child = elt.lastChild;\n        while (child && (child !== originalLastChild)) {\n            if (child.querySelectorAll) {\n                child.dispatchEvent(new Event('DOMContentAdded', {bubbles: true}));\n            }\n            child = child.previousSibling;\n        }\n    });\n};\nexport const htmlPrepend = opts => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        const originalFirstChild = elt.firstChild;\n        elt.insertAdjacentHTML('afterbegin', opts.content);\n        let child = elt.firstChild;\n        while (child && (child !== originalFirstChild)) {\n            if (child.querySelectorAll) {\n                child.dispatchEvent(new Event('DOMContentAdded', {bubbles: true}));\n            }\n            child = child.nextSibling;\n        }\n    });\n};\nexport const htmlBefore = opts => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        const originalPreviousSibling = elt.previousSibling;\n        elt.insertAdjacentHTML('beforebegin', opts.content);\n        let sibling = elt.previousSibling;\n        while (sibling && (sibling !== originalPreviousSibling)) {\n            if (sibling.querySelectorAll) {\n                sibling.dispatchEvent(new Event('DOMContentAdded', {bubbles: true}));\n            }\n            sibling = sibling.previousSibling;\n        }\n    });\n};\nexport const htmlContent = (opts) => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        elt.innerHTML = opts.content;\n        let child = elt.firstChild;\n        while (child) {\n            if (child.querySelectorAll) {\n                child.dispatchEvent(new Event('DOMContentAdded', {bubbles: true}));\n            }\n            child = child.nextSibling;\n        }\n    });\n};\nexport const htmlReplaceWith = (opts) => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n            const previousSibling = elt.previousSibling;\n            const nextSibling = elt.nextSibling;\n            const parentNode = elt.parentNode;\n            elt.outerHTML = opts.content;\n            let sibling = parentNode.firstChild;\n            if (previousSibling) {\n                sibling = previousSibling.nextSibling;\n            }\n            while (sibling && (sibling !== nextSibling)) {\n                if (sibling.querySelectorAll) {\n                    sibling.dispatchEvent(new Event('DOMContentAdded', {bubbles: true}));\n                }\n                sibling = sibling.nextSibling;\n            }\n        }\n    )\n    ;\n};\nexport const htmlEmpty = opts => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        while (elt.firstChild) {\n            elt.removeChild(elt.firstChild);\n        }\n    });\n};\nexport const htmlRemove = opts => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        elt.parentNode.removeChild(elt);\n    });\n};\nexport const htmlText = (opts) => {\n    document.querySelectorAll(opts.selector).forEach(elt => {\n        elt.textContent = opts.content;\n    });\n};\n","////////////////////////////////////////////////////////////////////////////////\n// This file is part of df_websockets                                          /\n//                                                                             /\n// Copyright (C) 2020 Matthieu Gallet <github@19pouces.net>                    /\n// All Rights Reserved                                                         /\n//                                                                             /\n// You may use, distribute and modify this code under the                      /\n// terms of the (BSD-like) CeCILL-B license.                                   /\n//                                                                             /\n// You should have received a copy of the CeCILL-B license with                /\n// this file. If not, please visit:                                            /\n// https://cecill.info/licences/Licence_CeCILL-B_V1-en.txt (English)           /\n// or https://cecill.info/licences/Licence_CeCILL-B_V1-fr.txt (French)         /\n//                                                                             /\n////////////////////////////////////////////////////////////////////////////////\n\nimport {htmlFormsSet} from \"./forms\";\nimport {\n  htmlAfter,\n  htmlAppend,\n  htmlBefore,\n  htmlContent,\n  htmlEmpty,\n  htmlPrepend,\n  htmlRemove,\n  htmlReplaceWith, htmlText\n} from \"./html\";\n\n(\n  () => {\n    const htmlAddClass = opts => {\n      document.querySelectorAll(opts.selector).forEach(elt => {\n        // noinspection JSUnresolvedVariable\n        elt.classList.add(opts.class_name)\n      });\n    };\n    const htmlRemoveClass = (opts) => {\n      document.querySelectorAll(opts.selector).forEach(elt => {\n        // noinspection JSUnresolvedVariable\n        elt.classList.remove(opts.class_name);\n      });\n    };\n    const htmlRemoveAttr = (opts) => {\n      document.querySelectorAll(opts.selector).forEach(elt => {\n        // noinspection JSUnresolvedVariable\n        elt.removeAttribute(opts.attr_name);\n      });\n    };\n    const htmlAddAttribute = (opts) => {\n      document.querySelectorAll(opts.selector).forEach(elt => {\n        // noinspection JSUnresolvedVariable\n        elt.setAttribute(opts.attr_name, opts.attr_value);\n      });\n    };\n    const htmlBooleanAttribute = (opts) => {\n      document.querySelectorAll(opts.selector).forEach(elt => {\n        if (opts.value) {\n          elt.setAttribute(opts.name, opts.name);\n        } else {\n          elt.removeAttribute(opts.name)\n        }\n      });\n    };\n    const htmlDownloadFile = (opts) => {\n      const save = document.createElement('a');\n      save.href = opts.url;\n      save.target = '_blank';\n      save.download = opts.filename || 'unknown';\n      const evt = new MouseEvent('click', {view: window, bubbles: true, cancelable: false});\n      save.dispatchEvent(evt);\n      (window.URL || window.webkitURL).revokeObjectURL(save.href);\n    };\n    const htmlFocus = (opts) => {\n      const elt = document.querySelector(opts.selector);\n      if (elt) {\n        elt.focus({preventScroll: false});\n      }\n    };\n\n    function connectSignals() {\n\n      window.DFSignals.connect('html.after', htmlAfter);\n      /*\"\"\"\n      .. function:: html.after(opts)\n\n          Insert content, specified by the parameter, after each element in the set of matched elements.\n          Equivalent to `$().after()` or `.insertAdjacentHTML('afterend', ...)`.\n          Trigger a `DOMContentAdded` event on the added content.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.after', {selector: \"#obj\", content: \"<span>hello</span>\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.after', to=WINDOW, selector=\"#obj\", content=\"<span>hello</span>\")\n\n          :param string selector: HTML selector\n          :param string content: new HTML content\n\n      */\n\n      window.DFSignals.connect('html.append', htmlAppend);\n      /*\"\"\"\n      .. function:: html.append(opts)\n\n          Insert content, specified by the parameter, to the end of each element in the set of matched elements.\n          Equivalent to `$().append()` or `.insertAdjacentHTML('beforeend', ...)`.\n          Trigger a `DOMContentAdded` event on the added content.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.append', {selector: \"#obj\", content: \"<span>hello</span>\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.append', to=WINDOW, selector=\"#obj\", content=\"<span>hello</span>\")\n\n          :param string selector: HTML selector\n          :param string content: new HTML content\n\n      */\n\n      window.DFSignals.connect('html.prepend', htmlPrepend);\n\n      /*\"\"\"\n      .. function:: html.prepend(opts)\n\n          Insert content, specified by the parameter, to the beginning of each element in the set of matched elements.\n          Equivalent to `$().prepend()` or `.insertAdjacentHTML('afterbegin', ...)`.\n          Trigger a `DOMContentAdded` event on the added content.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.prepend', {selector: \"#obj\", content: \"<span>hello</span>\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.prepend', to=WINDOW, selector=\"#obj\", content=\"<span>hello</span>\")\n\n          :param string selector: HTML selector\n          :param string content: new HTML content\n\n      */\n\n      window.DFSignals.connect('html.before', htmlBefore);\n      /*\"\"\"\n      .. function:: html.before(opts)\n\n          Insert content, specified by the parameter, before each element in the set of matched elements..\n          Equivalent to `$().before()` or `.insertAdjacentHTML('beforebegin', ...)`.\n          Trigger a `DOMContentAdded` event on the added content.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.before', {selector: \"#obj\", content: \"<span>hello</span>\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.before', to=WINDOW, selector=\"#obj\", content=\"<span>hello</span>\")\n\n          :param string selector: HTML selector\n          :param string content: new HTML content\n\n      */\n      window.DFSignals.connect('html.content', htmlContent);\n      /*\"\"\"\n      .. function:: html.content(opts)\n\n          set the HTML contents of every matched element.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.content', {selector: \"#obj\", content: \"<span>hello</span>\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.content', to=WINDOW, selector=\"#obj\", content= \"<span>hello</span>\")\n\n\n          :param string selector: HTML selector\n          :param string content: new HTML content\n      */\n\n      window.DFSignals.connect('html.replace_with', htmlReplaceWith);\n      /*\"\"\"\n      .. function:: html.replace_with(opts)\n\n          Replace each element in the set of matched elements with the provided new content.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.replace_with', {selector: \"#obj\", content: \"<span>hello</span>\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.replace_with', to=WINDOW, selector=\"#obj\", content=\"<span>hello</span>\")\n\n          :param string selector: HTML selector\n          :param string content: new HTML content\n\n      */\n\n      window.DFSignals.connect('html.empty', htmlEmpty);\n      /*\"\"\"\n      .. function:: html.empty(opts)\n\n          Remove all child nodes of the set of matched elements from the DOM.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.empty', {selector: \"#obj\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.empty', to=WINDOW, selector=\"#obj\")\n\n          :param string selector: HTML selector\n\n      */\n\n      window.DFSignals.connect('html.remove', htmlRemove);\n      /*\"\"\"\n      .. function:: html.remove(opts)\n\n          Remove the set of matched elements from the DOM.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.remove', {selector: \"#obj\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.remove', to=WINDOW, selector=\"#obj\")\n\n          :param string selector: HTML selector\n\n      */\n\n      window.DFSignals.connect('html.add_class', htmlAddClass);\n      /*\"\"\"\n      .. function:: html.add_class(opts)\n\n          Adds the specified class(es) to each of the set of matched elements.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.add_class', {selector: \"#obj\", class_name: \"myclass\"});\n\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.add_class', to=WINDOW, selector=\"#obj\", class_name=\"myclass\")\n\n\n          :param string selector: HTML selector\n          :param string class_name: new class\n\n      */\n      window.DFSignals.connect('html.remove_class', htmlRemoveClass);\n      /*\"\"\"\n      .. function:: html.remove_class(opts)\n\n          Remove a single class, multiple classes, or all classes from each element in the set of matched elements.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.remove_class', {selector: \"#obj\", class_name: \"class\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.remove_class', to=WINDOW, selector=\"#obj\", class_name=\"attr\")\n\n          :param string selector: HTML selector\n          :param string class_name: class to remove\n\n      */\n      window.DFSignals.connect('html.remove_attr', htmlRemoveAttr);\n      /*\"\"\"\n      .. function:: html.remove_attr(opts)\n\n          Remove an attribute from each element in the set of matched elements.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.remove_attr', {selector: \"#obj\", attr_name: \"attr\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.remove_attr', to=WINDOW, selector=\"#obj\", attr_name=\"attr\")\n\n          :param string selector: HTML selector\n          :param string attr_name: attribute to remove\n\n      */\n\n      window.DFSignals.connect('html.add_attribute', htmlAddAttribute);\n      /*\"\"\"\n      .. function:: html.add_attribute(opts)\n\n          Add an attribute to each element matched by the given selector.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.add_attribute', {selector: \"#obj\", attr_name: \"data-df\", attr_value: \"value\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.add_attribute', to=WINDOW, selector=\"#obj\", attr_name=\"data-df\", attr_value= \"value\")\n\n\n          :param string selector: HTML selector\n          :param string attr_name: name of the attribute to add\n          :param string attr_value: value of the attribute to add\n\n      */\n      window.DFSignals.connect('html.boolean_attribute', htmlBooleanAttribute);\n      /*\"\"\"\n      .. function:: html.boolean_attribute(opts)\n\n          Set or remove a boolean attribute. Always set the value of the added attribute to its name.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.boolean_attribute', {selector: \"#input\", name: \"checked\", value: true});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.boolean_attribute', to=WINDOW, selector=\"#input\", name=\"checked\", value=True)\n\n\n          :param string selector: HTML selector\n          :param string name: name of the attribute to add\n          :param string value: if True, add the attribute, if False, remove the attribute\n\n      */\n\n\n      window.DFSignals.connect('html.text', htmlText);\n      /*\"\"\"\n      .. function:: html.text(opts)\n\n          Set the text contents of the matched elements.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.text', {selector: \"#obj\", content: \"<span>hello</span>\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.text', to=WINDOW, selector=\"#obj\", content= \"<span>hello</span>\")\n\n\n          :param string selector: HTML selector\n          :param string content: new HTML content\n\n      */\n\n      window.DFSignals.connect('html.download_file', htmlDownloadFile);\n      /*\"\"\"\n      .. function:: html.download_file(opts)\n\n          Force the client to download the given file.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.download_file', {url: \"http://example.org/test.zip\", filename: \"test.zip\"});\n\n      .. code-block:: python\n\n          trigger(window_info, 'html.download_file', to=WINDOW, url=\"http://example.org/test.zip\", filename=\"test.zip\")\n\n          :param string url: URL of the file\n          :param string filename: name of the file\n\n      */\n\n\n      window.DFSignals.connect('html.focus', htmlFocus);\n      /*\"\"\"\n      .. function:: html.focus(opts)\n\n          Set the focus to the matched element.\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.focus', {selector: \"#obj\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.focus', to=WINDOW, selector=\"#obj\")\n\n          :param string selector: HTML selector\n\n      */\n\n      window.DFSignals.connect('html.forms.set', htmlFormsSet);\n      /*\"\"\"\n      .. function:: html.forms.set(opts)\n\n          Set the value of a form input\n\n          .. code-block:: javascript\n\n              window.DFSignals.call('html.forms.set', {selector: \"[name=title]\", value: \"new title\"});\n\n          .. code-block:: python\n\n              trigger(window_info, 'html.forms.set', to=WINDOW, selector=\"[name=title]\", value=\"new_title\")\n\n          :param string selector: HTML selector\n\n      */\n    }\n\n    document.addEventListener(\"DOMContentLoaded\", connectSignals);\n  }\n)();\n","export function serializeForm(form) {\n    /*\n    Serialize a HTMLFormElement as a list of {name: <field name>, value: <field value>}\n    disabled/reset/submit/buttonf fields are ignored\n     */\n    var serialized = [];\n    // Loop through each field in the form\n    for (var i = 0; i < form.elements.length; i++) {\n        var field = form.elements[i];\n        // Respect the same rules as jQuery's serializeArray\n        if (!field.name || field.disabled || field.type === 'reset' || field.type === 'submit' || field.type === 'button') {\n            continue;\n        }\n        if (field.type === \"file\") { // just returns the name of selected files\n            for (var n = 0; n < field.files.length; n++) {\n                serialized.push({ name: field.name, value: field.files[n].name });\n            }\n        }\n        else if (field.type === 'select-multiple') { // get all selected options\n            for (var n = 0; n < field.selectedOptions.length; n++) {\n                serialized.push({ name: field.name, value: field.selectedOptions[n].value });\n            }\n        }\n        else if ((field.type !== 'checkbox' && field.type !== 'radio') || field.checked) {\n            serialized.push({ name: field.name, value: field.value });\n        }\n    }\n    return serialized;\n}\nexport function htmlFormsSet(opts) {\n    function setFormFieldValue(form, name, value) {\n        var item = form.elements.namedItem(name);\n        if (item === null) {\n            return;\n        }\n        else if (item instanceof RadioNodeList) {\n            if ((value === true) || (value === false)) {\n                item.forEach(function (input) {\n                    input.checked = value;\n                });\n            }\n            else if (Array.isArray(value)) {\n                var valuesSet_1 = new Set(value);\n                item.forEach(function (input) {\n                    input.checked = valuesSet_1.has(input.value);\n                });\n            }\n            else {\n                item.forEach(function (input) {\n                    input.checked = input.value === value;\n                });\n            }\n        }\n        else if (item instanceof HTMLTextAreaElement) {\n            item.value = value;\n        }\n        else if ((item instanceof HTMLInputElement) && (item.type === \"checkbox\")) {\n            if (value === true) {\n                item.checked = true;\n            }\n            else if (value === false) {\n                item.checked = false;\n            }\n            else {\n                item.value = value;\n            }\n        }\n        else if (item instanceof HTMLSelectElement) {\n            var options = item.options;\n            if (Array.isArray(value)) {\n                var valuesSet = new Set(value);\n                for (var i = 0; i < options.length; i++) {\n                    options[i].selected = valuesSet.has(options[i].value);\n                }\n            }\n            else {\n                for (var i = 0; i < options.length; i++) {\n                    options[i].selected = options[i].value === value;\n                }\n            }\n        }\n        else if (item instanceof HTMLInputElement) {\n            item.value = value;\n        }\n    }\n    document.querySelectorAll(opts.selector).forEach(function (form) {\n        opts.values.forEach(function (values) {\n            setFormFieldValue(form, values.name, values.value);\n        });\n    });\n}\n(function () {\n    function websocketForms(evt) {\n        /*\n        search all HTML elements with an attribute \"data-df-signal\" that contains a JSON list of Signal objects:\n        {\n            name: \"name of the signal to call\",  (required)\n            on: \"name of the listened event\",\n            opts: \"extra options\",               (optional)\n            form: \"name of option to add to opts that contains the serialized form\",  (optional)\n            value: \"name of option to add to opts that contains the value\",  (optional)\n            prevent: preventDefault               (optional, defaults to true for on==\"submit\" or \"click\" else false )\n        }\n\n        When the listened event is not given, the listened event is\n            * \"submit\" for forms,\n            * \"click\" for \"reset\"/\"submit\"/\"button\" input fields,\n            * \"change\" for other fields.\n\n        Using on a HTML form:\n        ```html\n        <form data-df-signal='[{\"name\": \"signal.name\", \"on\": \"change\", \"form\": \"form_data\", \"opts\": {\"id\": 42} }]'>\n            <input type=\"text\" name=\"title\" value=\"df_websockets\">\n        </form>```\n        or, using the Django templating system:\n        ```html\n        {% load df_websockets %}\n        <form {% js_call \"signal.name\" on=\"change\" form=\"form_data\" id=42 %}>\n            <input type=\"text\" name=\"title\" value=\"df_websockets\">\n        </form>```\n\n        When the field \"title\" is modified, a signal \"signal.name\" is triggered on the server (via the websocket) with\n        the following arguments:\n        ```python\n        form_data = [{\"name\": \"title\", \"value\": \"df_websockets\"}]\n        id = 42\n        ```\n\n        Using on a HTML form input field:\n        ```html\n        <form>\n            <input type=\"text\" name=\"title\" data-df-signal='[{\"name\": \"signal.name\", \"on\": \"change\", \"value\": \"title\", \"opts\": {\"id\": 42} }]'>\n        </form>```\n        or, using the Django templating system:\n        ```html\n        {% load df_websockets %}\n        <form>\n            <input type=\"text\" name=\"title\" {% js_call \"signal.name\" on=\"change\" value=\"title\" id=42 %}>\n        </form>```\n\n        When the field \"title\" is modified, a signal \"signal.name\" is triggered on the server (via the websocket) with\n        the following arguments:\n        ```python\n        title = \"new title value\"\n        id = 42\n        ```\n         */\n        if (!evt.target.querySelectorAll) {\n            return;\n        }\n        evt.target.querySelectorAll(\"[data-df-signal]\").forEach(function (target) {\n            var signals = JSON.parse(target.getAttribute(\"data-df-signal\"));\n            signals.forEach(function (signal) {\n                var eventName = signal.on;\n                if (!eventName) {\n                    if (target.tagName === \"FORM\") {\n                        eventName = \"submit\";\n                    }\n                    else if ((target.tagName === \"INPUT\" && !(target.type === 'reset' || target.type === 'submit' || target.type === 'button')) || (target.tagName === \"TEXTAREA\")) {\n                        eventName = \"change\";\n                    }\n                    else {\n                        eventName = \"click\";\n                    }\n                }\n                var callback = function (evt) {\n                    // noinspection JSUnresolvedVariable\n                    var prevent = signal.prevent;\n                    var opts = signal.opts || {};\n                    if (signal.form) {\n                        opts[signal.form] = serializeForm(target);\n                    }\n                    if (signal.value) {\n                        if (target.type === \"file\") { // just returns the name of selected files\n                            opts[signal.value] = [];\n                            for (var n = 0; n < target.files.length; n++) {\n                                opts[signal.value].push(target.files[n].name);\n                            }\n                        }\n                        else if (target.type === 'select-multiple') { // get all selected options\n                            opts[signal.value] = [];\n                            for (var n = 0; n < target.selectedOptions.length; n++) {\n                                opts[signal.value].push(target.selectedOptions[n].value);\n                            }\n                        }\n                        else if (target.type === 'checkbox' || target.type === 'radio') {\n                            opts[signal.value] = target.checked;\n                        }\n                        else {\n                            opts[signal.value] = target.value;\n                        }\n                    }\n                    window.DFSignals.call(signal.name, opts, undefined);\n                    if (prevent === true || (prevent === null && eventName !== \"change\")) {\n                        evt.preventDefault();\n                    }\n                };\n                target.addEventListener(eventName, callback);\n            });\n        });\n    }\n    document.addEventListener(\"DOMContentAdded\", function (evt) {\n        window.setTimeout(function () {\n            websocketForms(evt);\n        }, 50);\n        // awful trick for being sure that our addEventListener is the last.\n        // allows things like CKEditor to push its content to the textarea before sending the content of the form.\n    });\n    document.addEventListener(\"DOMContentLoaded\", function (evt) {\n        window.setTimeout(function () {\n            websocketForms(evt);\n        }, 50);\n        // awful trick for being sure that our addEventListener is the last.\n        // allows things like CKEditor to push its content to the textarea before sending the content of the form.\n    });\n})();\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// startup\n// Load entry module and return exports\n__webpack_require__(66);\n__webpack_require__(841);\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(894);\n"],"names":["window","DFSignals","connection","buffer","registry","wsurl","document","addEventListener","websocketConnect","cookieName","dfWsURL","cname","name","ca","decodeURIComponent","cookie","split","i","length","c","charAt","substring","indexOf","getCookie","console","info","WebSocket","onopen","send","onmessage","e","debug","data","msg","JSON","parse","signal","signal_id","call","opts","onerror","error","onclose","setTimeout","close","id","undefined","stringify","push","connect","fn","htmlAfter","querySelectorAll","selector","forEach","elt","originalNextSibling","nextSibling","insertAdjacentHTML","content","sibling","dispatchEvent","Event","bubbles","htmlAppend","originalLastChild","lastChild","child","previousSibling","htmlPrepend","originalFirstChild","firstChild","htmlBefore","originalPreviousSibling","htmlContent","innerHTML","htmlReplaceWith","parentNode","outerHTML","htmlEmpty","removeChild","htmlRemove","htmlText","textContent","htmlAddClass","classList","add","class_name","htmlRemoveClass","remove","htmlRemoveAttr","removeAttribute","attr_name","htmlAddAttribute","setAttribute","attr_value","htmlBooleanAttribute","value","htmlDownloadFile","save","createElement","href","url","target","download","filename","evt","MouseEvent","view","cancelable","URL","webkitURL","revokeObjectURL","htmlFocus","querySelector","focus","preventScroll","htmlFormsSet","form","values","item","elements","namedItem","RadioNodeList","input","checked","Array","isArray","valuesSet_1","Set","has","HTMLTextAreaElement","HTMLInputElement","type","HTMLSelectElement","options","valuesSet","selected","setFormFieldValue","websocketForms","getAttribute","eventName","on","tagName","prevent","serialized","field","disabled","n","files","selectedOptions","serializeForm","preventDefault","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty"],"sourceRoot":""}